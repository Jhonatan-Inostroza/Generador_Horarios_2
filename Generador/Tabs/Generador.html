<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Creador de Horarios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Tailwind (solo para layout general) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- XLSX -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- CSS propio -->
    <link rel="stylesheet" href="/generador/Tabs/generador.css" />

    <!-- CSS DEL MODAL REAL (BD y EXCEL comparten) -->
    <link rel="stylesheet" href="/generador/UsandoBBDD/stylesDB.css" />

    <!-- MAIN -->
    <script type="module" src="/generador/Tabs/main.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>

  <body
    class="min-h-screen flex justify-center items-start p-8 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-400 via-indigo-200 to-slate-100"
  >
    <div
      class="rounded-3xl p-10 max-w-7xl w-full bg-white/40 backdrop-blur-xl shadow-[0_20px_60px_rgba(0,0,0,0.15)]"
    >
      <!-- TÍTULO -->
      <h1
        class="text-4xl md:text-5xl font-black text-center text-indigo-900 mb-12 flex items-center justify-center gap-4 drop-shadow"
      >
        <i class="fa-solid fa-calendar-days text-indigo-600"></i>
        Creador de Horarios Académicos
      </h1>

      <!-- ===================== TABS ===================== -->
      <div class="mb-10">
        <nav class="flex gap-8 justify-center">
          <button
            id="tab-db"
            class="tab-btn relative px-6 py-3 font-bold text-indigo-700 transition active"
          >
            <i class="fa-solid fa-database mr-2"></i>
            Cursos Registrados
          </button>

          <button
            id="tab-excel"
            class="tab-btn relative px-6 py-3 font-bold text-gray-500 hover:text-indigo-700 transition"
          >
            <i class="fa-solid fa-file-excel mr-2"></i>
            Archivo Excel
          </button>
        </nav>
      </div>

      <!-- ===================== TAB DB ===================== -->
      <section id="tab-content-db" class="text-center text-gray-500 py-10">
        <i class="fa-solid fa-circle-info text-3xl mb-4"></i>
        <p>(Pendiente de integrar con la base de datos)</p>
      </section>

      <!-- ===================== TAB EXCEL ===================== -->
      <section id="tab-content-excel" class="hidden">
        <!-- INFO -->
        <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-200 mb-8">
          <p class="text-sm text-indigo-700 leading-relaxed">
            <strong>Columnas requeridas:</strong><br />
            ASIGNATURA, GRUPO HORARIO, DOCENTE, DÍA, HORA INICIO, HORA FIN
            <br /><br />
            <strong>Paso 1:</strong> Seleccionar archivo Excel<br />
            <strong>Paso 2:</strong> Cargar Excel
          </p>
        </div>

        <!-- CARGA -->
        <div
          class="flex flex-col items-center gap-4 p-5 border-2 border-dashed rounded-xl bg-gray-50"
        >
          <!-- FILE SELECT -->
          <div class="flex flex-col sm:flex-row items-center gap-3">
            <label
              for="excel-file-input"
              class="flex items-center gap-2 px-5 py-2.5 cursor-pointer border rounded-lg bg-white hover:bg-gray-100 transition shadow-sm"
            >
              <i class="fa-solid fa-upload text-green-600"></i>
              <span class="text-sm font-medium text-gray-700"
                >Seleccionar Excel</span
              >
              <input
                type="file"
                id="excel-file-input"
                accept=".xlsx,.xls"
                class="hidden"
              />
            </label>

            <!-- FILE NAME -->
            <div
              id="excel-file-name"
              class="hidden flex items-center gap-2 px-4 py-2 bg-white border rounded-lg text-sm text-gray-600 shadow-sm max-w-xs truncate"
            >
              <i class="fa-solid fa-file-excel text-green-600"></i>
              <span id="excel-file-text" class="truncate"></span>
            </div>
          </div>

          <!-- ACTIONS -->
          <div class="flex gap-3">
            <button
              id="btn-upload-excel"
              class="flex items-center gap-2 px-6 py-2.5 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition shadow"
            >
              <i class="fa-solid fa-cloud-arrow-up"></i>
              Cargar
            </button>

            <a
              href="/descargar-excel"
              download
              class="flex items-center gap-2 px-5 py-2.5 rounded-lg border border-indigo-300 text-indigo-600 text-sm hover:bg-indigo-50 transition"
            >
              <i class="fa-solid fa-download"></i>
              Plantilla Ejemplo
            </a>
          </div>
        </div>

        <!-- ASIGNATURAS -->
        <div id="step-select-asignaturas-excel" class="hidden mt-10">
          <ul id="asignaturas-list-excel" class="space-y-4"></ul>

          <button
            id="btn-generate-excel"
            class="mt-8 px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow hidden"
          >
            <i class="fa-solid fa-gears mr-2"></i>
            Generar Horarios
          </button>
        </div>
      </section>
    </div>

    <!-- ===================== MODAL ===================== -->
    <div
      id="schedule-modal"
      class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden flex items-center justify-center z-50 transition-opacity"
    >
      <div
        class="bg-white/90 backdrop-blur-xl rounded-3xl w-full max-w-6xl shadow-[0_25px_60px_-15px_rgba(0,0,0,0.3)] overflow-hidden animate-scaleIn"
      >
        <!-- ================= HEADER ================= -->
        <div
          class="flex items-center justify-between px-8 py-5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white"
        >
          <h2
            id="schedule-title"
            class="text-2xl font-extrabold flex items-center gap-3"
          >
            <i class="fa-solid fa-calendar-check text-white/90"></i>
            Horarios Generados
          </h2>

          <div class="flex items-center gap-3">
            <button
              id="btn-print-schedules"
              class="flex items-center gap-2 px-4 py-2 rounded-full bg-white/20 hover:bg-white/30 transition"
            >
              <i class="fa-solid fa-print"></i>
              <span class="hidden sm:inline">Imprimir</span>
            </button>

            <button
              aria-label="Cerrar ventana"
              id="close-modal"
              class="w-10 h-10 rounded-full bg-white/20 hover:bg-red-500 hover:text-white flex items-center justify-center transition"
            >
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
        </div>

        <!-- ================= CONTROLES ================= -->
        <div class="flex justify-center gap-8 py-4 bg-white/80 border-b">
          <button
            id="prev-schedule"
            aria-label="Anterior horario"
            class="nav-btn"
          >
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <span class="text-sm text-gray-500 font-medium tracking-wide">
            Navegar horarios
          </span>

          <button
            id="next-schedule"
            aria-label="Siguiente horario"
            class="nav-btn"
          >
            <i class="fa-solid fa-chevron-right"></i>
          </button>
        </div>

        <!-- ================= BODY ================= -->
        <div
          class="p-8 overflow-auto max-h-[70vh] bg-gradient-to-br from-white to-indigo-50"
        >
          <div id="schedule-grid" class="mb-8"></div>

          <div
            id="legend-box"
            class="mt-6 p-5 rounded-2xl bg-white shadow-inner border"
          ></div>
        </div>
      </div>
    </div>
  </body>
</html>
